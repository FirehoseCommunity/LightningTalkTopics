<h1 class="col-xs-10 col-xs-offset-1 text-center">Suggested and Unscheduled Talks</h1>
<div class="col-xs-10 col-xs-offset-1">
  <% @talks.order(:topic).each do |talk| %>
    <div class="ice col-xs-12 col-md-4">
      <h2><%= link_to talk.topic, talk_path(talk) %></h2>
      <h4><%= truncate talk.description, length: 80 %></h4>
      <% if talk.description.length > 80 %>
        <p><%= link_to "Read More...", talk_path(talk) %></p>
      <% end %>

      <% if talk.is_assigned == true %>

        <% if current_user != nil && (current_user.first_name == talk.assigned_to) || current_user != nil && (current_user.admin == true) %>
          <p>
          <%= link_to "Assigned", assigned_talk_path(talk), method: :patch %>
          <i class="glyphicon glyphicon-star"></i>
          </p>
        <% else %>
          Assigned <i class="glyphicon glyphicon-star"></i>        
        <% end %>

      <p>Talk is assigned to: <%= talk.assigned_to %></p>
      <% else %>

      <p>
      <% if current_user != nil %>  
        <%= link_to "Unassigned", assigned_talk_path(talk), method: :patch %>
        <i class="glyphicon glyphicon-star-empty"></i>
        </p><br />
      <% else %>
        Unassigned 
        <i class="glyphicon glyphicon-star-empty"></i>
        </p><br />  
      <% end %>     

    <% end %>
    <br />
    <h4 class="pull-left"><%= pluralize(talk.votes.count, "vote") %>&nbsp</h4>
    <p class="pull-right"><%= button_to '+1', upvote_talk_path(talk), class: "btn btn-sm btn-info", method: :post %></p>
    </div>
  <% end %>
</div>
cd.